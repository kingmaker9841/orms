(this.webpackJsonporr=this.webpackJsonporr||[]).push([[25],{550:function(e,t,a){"use strict";a.d(t,"e",(function(){return S})),a.d(t,"f",(function(){return Y})),a.d(t,"g",(function(){return w})),a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"l",(function(){return h})),a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return b})),a.d(t,"k",(function(){return y})),a.d(t,"j",(function(){return k})),a.d(t,"m",(function(){return D})),a.d(t,"i",(function(){return f})),a.d(t,"h",(function(){return E}));var n=a(544),r=a(543),c=a.n(r),l=a(54),u="/report",o="/risk-register-all",i="/audit-log",s=a(554),m=s.branchSummary,d=s.downloadBranchSummary,h=s.saveBranchSummary,p=a(555),f=p.getRiskTriggers,E=p.getRiskTriggerData,v=a(556),g=v.branchCategorization,b=v.downloadBranchCategorization,y=v.saveBranchCategorization,k=a(557).hoSummary;function w(e){var t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(l.server.get("".concat(u,"/report-outputs"),{params:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function S(e){var t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(l.server.get("".concat(o),{params:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function Y(e){l.server.get("".concat(i)).then((function(t){return e(null,t.data)})).catch((function(e){console.error("Error getting data from all risk Register!")}))}function D(e,t){var a;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.awrap(l.server.post("".concat(u,"/grading"),Object(n.a)({},t,{data:e})));case 2:return a=r.sent,r.abrupt("return",a.data);case 4:case"end":return r.stop()}}))}},551:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(54),r=function(e){n.server.get("/all").then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}},554:function(e,t,a){"use strict";a.r(t),a.d(t,"branchSummary",(function(){return u})),a.d(t,"downloadBranchSummary",(function(){return o})),a.d(t,"saveBranchSummary",(function(){return i}));var n=a(543),r=a.n(n),c=a(54),l="/report";function u(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(c.server.get("".concat(l,"/branch-summary"),{params:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function o(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(c.server.post("".concat(l,"/branch-summary/download"),JSON.stringify(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function i(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(c.server.post("".concat(l,"/branch-summary/save"),JSON.stringify(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}},555:function(e,t,a){"use strict";a.r(t),a.d(t,"getRiskTriggers",(function(){return i})),a.d(t,"getRiskTriggerData",(function(){return o}));var n=a(543),r=a.n(n),c=a(54),l="report/risk-trigger",u="report/risk-trigger/data";function o(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.server.get("".concat(u),{params:e}));case 1:case"end":return t.stop()}}))}function i(e){c.server.get("".concat(l)).then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}},556:function(e,t,a){"use strict";a.r(t),a.d(t,"branchCategorization",(function(){return u})),a.d(t,"downloadBranchCategorization",(function(){return o})),a.d(t,"saveBranchCategorization",(function(){return i}));var n=a(543),r=a.n(n),c=a(54),l="/report";function u(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(c.server.get("".concat(l,"/branch-categorization"),{params:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function o(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(c.server.post("".concat(l,"/branch-categorization/download"),JSON.stringify(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function i(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(c.server.post("".concat(l,"/branch-categorization/save"),JSON.stringify(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}},557:function(e,t,a){"use strict";a.r(t),a.d(t,"hoSummary",(function(){return u}));var n=a(543),r=a.n(n),c=a(54),l="/report";function u(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(c.server.get("".concat(l,"/ho-summary"),{params:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}},568:function(e,t,a){"use strict";a.d(t,"h",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"g",(function(){return d})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a(548).bs2ad,r=a(548).ad2bs,c=a(559),l="/04/01",u="/07/01",o="/10/01",i="/01/01",s=function(e){var t=e.year,a=e.month,n=e.day;return c(t+" "+a+" "+n,"YYYY MM DD").format("YYYY-MM-DD")},m=function(){var e=r(c().format("YYYY/MM/DD")),t=e.en.year,a=h(e);return s(n(t+a))},d=function(e){var t=r(c(e).format("YYYY/MM/DD"));return h(t)},h=function(e){var t=e.en.month;return t>=10?o:t>=7?u:t>=4?l:i},p=function(e){return r(c(e).format("YYYY/MM/DD")).en}},883:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return L}));var n=a(546),r=a(544),c=a(545),l=a(85),u=a(86),o=a(88),i=a(87),s=a(89),m=a(2),d=a.n(m),h=a(537),p=a(538),f=a(534),E=a(535),v=a(560),g=a(540),b=a(541),y=a(542),k=a(552),w=a(532),S=a(877),Y=a(875),D=a(876),x=a(772),A=a(773),C=a(558),O=a(18),R=a.n(O),M=a(550),N=a(551),T=a(559),j=a.n(T),I=a(568),B=a(578),F=a.n(B),z=a(548),L=function(e){function t(){var e,a;Object(l.a)(this,t);for(var u=arguments.length,s=new Array(u),m=0;m<u;m++)s[m]=arguments[m];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={options:{branchId:"",frequency:3,mergeFunction:"avg",status:"Approved",startDate:Object(I.h)()},branches:[],branchSummary:[],riskAreas:[],activeTab:"1"},a.toggle=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a.handleChange=function(e){var t=e.target.name,n=e.target.value,r=a.state.options;r[t]=n,a.setState({options:r},(function(){a.updateData()}))},a.handleDateChange=function(e){var t=e.target.value,n="";switch(e.target.name){case"quarter":n=Object(I.e)(a.state.options.startDate).year+t;break;case"year":n=t+Object(I.g)(a.state.options.startDate)}if(t){var r=Object(I.f)(Object(z.bs2ad)(n)),c=a.state.options;c.startDate=r,a.setState({options:c},(function(){return a.updateData()}))}},a.overrideValues=function(e){var t=e.target.name.split("-"),l=Object(c.a)(t,2),u=l[0],o=l[1],i=a.state.branchSummary.map((function(t,a){return a===Number(o)?Object(r.a)({},t,Object(n.a)({},u,e.target.value)):t}));a.setState({branchSummary:i})},a.downloadReport=function(){Object(M.d)({branchSummary:a.state.branchSummary,riskAreas:a.state.riskAreas,options:a.state.options}).then((function(e){var t=e.path;window.open("/api"+"/".concat(t))})).catch((function(){}))},a.saveReport=function(){window.confirm("Do you want to save this report?")&&Object(M.l)({branchSummary:a.state.branchSummary,options:a.state.options}).then((function(e){window.alert(e.message)})).catch((function(){}))},a}return Object(s.a)(t,e),Object(u.a)(t,[{key:"updateData",value:function(){var e=this;Object(M.b)(this.state.options).then((function(t){e.setState({branchSummary:t.branchSummary,riskAreas:t.riskAreas})})).catch((function(e){}))}},{key:"componentDidMount",value:function(){var e=this;this.updateData(),Object(N.a)((function(t,a){t||e.setState({branches:a.branches})}))}},{key:"render",value:function(){var e=this,t=this.props.permissions;return d.a.createElement("div",{className:"animated fadeIn mb-3"},d.a.createElement(h.a,null,d.a.createElement(p.a,null,d.a.createElement(f.a,null,d.a.createElement(E.a,{md:4},d.a.createElement(v.a,null,"Quarter Start Date (YYYY/MM/DD)"),d.a.createElement(g.a,{className:"mb-2"},d.a.createElement(b.a,{addonType:"prepend"},d.a.createElement(y.a,{onChange:this.handleDateChange,value:Object(I.g)(this.state.options.startDate),type:"select",name:"quarter",className:"font-italic"},d.a.createElement("option",{value:""},"Select Quarter"),d.a.createElement("option",{value:I.b},"First Quarter"),d.a.createElement("option",{value:I.d},"Second Quarter"),d.a.createElement("option",{value:I.c},"Third Quarter"),d.a.createElement("option",{value:I.a},"Fourth Quarter"))),d.a.createElement(y.a,{type:"number",maxLength:"4",minLength:"4",className:"font-italic",placeholder:"Year",name:"year",onChange:this.handleDateChange,value:Object(I.e)(this.state.options.startDate).year}))),t.isApprover||t.isAdmin?d.a.createElement(E.a,{md:4},d.a.createElement(v.a,null,"Branch"),d.a.createElement(y.a,{type:"select",name:"branchId",value:this.state.options.branchId,onChange:this.handleChange},d.a.createElement("option",{value:""},"--- Your Branch ---"),this.state.branches.map((function(e){return d.a.createElement("option",{value:e.id,key:e.id},e.name)})))):null,d.a.createElement(E.a,{md:4},d.a.createElement(v.a,null,"Reporting Frequency"),d.a.createElement(y.a,{type:"select",name:"frequency",value:this.state.options.frequency,onChange:this.handleChange},d.a.createElement("option",{value:"3"},"Quarterly"),d.a.createElement("option",{value:"6"},"Half Yearly"),d.a.createElement("option",{value:"12"},"Yearly"))),d.a.createElement(E.a,{md:4},d.a.createElement(v.a,null,"Merge Function"),d.a.createElement(y.a,{type:"select",name:"mergeFunction",value:this.state.options.type,onChange:this.handleChange},d.a.createElement("option",{value:"avg"},"Average"),d.a.createElement("option",{value:"min"},"Minimum"),d.a.createElement("option",{value:"max"},"Maximum"))))),d.a.createElement(k.a,null,d.a.createElement(w.a,{className:"mx-2",color:"info",onClick:this.downloadReport},d.a.createElement("i",{className:"fa fa-download text-white"})),t.isApprover?d.a.createElement(w.a,{className:"mx-2",color:"success",onClick:this.saveReport},d.a.createElement("i",{className:"fa fa-save text-white"})):null)),d.a.createElement(S.a,{tabs:!0},d.a.createElement(Y.a,null,d.a.createElement(D.a,{className:R()({active:"1"===this.state.activeTab}),onClick:function(){e.toggle("1")}},"Branch Summary")),this.state.riskAreas.map((function(t,a){return d.a.createElement(Y.a,{key:a},d.a.createElement(D.a,{className:R()({active:e.state.activeTab===a+1}),onClick:function(){e.toggle(a+1)}},t.code))}))),d.a.createElement(x.a,{activeTab:this.state.activeTab},d.a.createElement(A.a,{tabId:"1"},d.a.createElement(C.a,{responsive:!0,bordered:!0},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"S.N."),d.a.createElement("th",null,"Risk Areas/Functions"),d.a.createElement("th",null,"Previous Risk Score (A)"),d.a.createElement("th",null,"Likelihood(Est.)"),d.a.createElement("th",null,"Impact(Est.)"),d.a.createElement("th",null,"Risk Score(Est.) (B)"),d.a.createElement("th",null,"R. Code"),d.a.createElement("th",null,"Occurrence"),d.a.createElement("th",null,"Amount/Timing"),d.a.createElement("th",null,"Financial Impact"),d.a.createElement("th",null,"Non-financial Impact"),t.isApprover?d.a.createElement(d.a.Fragment,null,d.a.createElement("th",{style:{minWidth:90}},"Likelihood"),d.a.createElement("th",{style:{minWidth:90}},"Impact")):null,d.a.createElement("th",null,"Actual Risk Score (C)"),t.isApprover?d.a.createElement(d.a.Fragment,null,d.a.createElement("th",null,"Weight"),d.a.createElement("th",null,"Weighted Risk")):null,d.a.createElement("th",{style:{minWidth:150}},"Remarks"),d.a.createElement("th",{className:"text-nowrap"},"(A-C)"),d.a.createElement("th",{className:"text-nowrap"},"(B-C)"),d.a.createElement("th",{style:{minWidth:150}},"Recommendation"))),d.a.createElement("tbody",null,this.state.branchSummary.map((function(a,n){return d.a.createElement("tr",{key:n},d.a.createElement("td",null,n+1),d.a.createElement("td",null,a.riskAreaName),d.a.createElement("td",null,a.previousRiskScore),d.a.createElement("td",null,a.estLikelihood),d.a.createElement("td",null,a.estImpact),d.a.createElement("td",null,a.estLikelihood*a.estImpact),d.a.createElement("td",null,a.riskAreaCode),d.a.createElement("td",null,a.occurrence),d.a.createElement("td",null,a.amountTiming),d.a.createElement("td",null,a.financialImpact),d.a.createElement("td",null),t.isApprover?d.a.createElement(d.a.Fragment,null,d.a.createElement("td",null,t.isApprover?d.a.createElement(y.a,{onChange:e.overrideValues,value:a.likelihood,type:"number",max:"5",name:"likelihood-"+n}):a.likelihood),d.a.createElement("td",null,t.isApprover?d.a.createElement(y.a,{onChange:e.overrideValues,value:a.impact,type:"number",max:"5",name:"impact-"+n}):a.impact)):null,d.a.createElement("td",null,a.likelihood*a.impact),t.isApprover?d.a.createElement(d.a.Fragment,null,d.a.createElement("td",null,a.weight),d.a.createElement("td",null,a.likelihood*a.impact*a.weight/100)):null,d.a.createElement("td",null,t.isApprover?d.a.createElement(y.a,{onChange:e.overrideValues,value:a.remarks,type:"text",name:"remarks-"+n}):a.remarks),d.a.createElement("td",null,a.previousRiskScore-a.likelihood*a.impact),d.a.createElement("td",null,a.estLikelihood*a.estImpact-a.likelihood*a.impact),d.a.createElement("td",null,t.isApprover?d.a.createElement(y.a,{onChange:e.overrideValues,value:a.recommendation,type:"text",name:"recommendation-"+n}):a.recommendation))}))))),this.state.riskAreas.map((function(t,a){return d.a.createElement(A.a,{key:a,tabId:a+1},d.a.createElement(C.a,{responsive:!0,bordered:!0},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"S.N."),d.a.createElement("th",null,"Branch"),d.a.createElement("th",null,"Transaction Date"),d.a.createElement("th",null,"Risk Particulars"),d.a.createElement("th",null,"Risk Trigger"),d.a.createElement("th",null,"Occurrences"),d.a.createElement("th",null,"Amount/Timing"),d.a.createElement("th",null,"Financial Impact"),d.a.createElement("th",null,"Non-financial Impact"),d.a.createElement("th",null,"Related Account"),d.a.createElement("th",null,"Related Staff"),d.a.createElement("th",null,"Traced Date"),d.a.createElement("th",null,"Traced By"),d.a.createElement("th",null,"Rectification Date"),d.a.createElement("th",null,"Remarks"))),d.a.createElement("tbody",null,t.risk_registers.map((function(t,a){return d.a.createElement("tr",{key:a},d.a.createElement("td",null,a+1),d.a.createElement("td",null,F.a.find(e.state.branches,{id:t.branchId}).name),d.a.createElement("td",null,j()(t.transactionDate).format("Do MM YYYY")),d.a.createElement("td",null,t.riskAreaParticular),d.a.createElement("td",null,t.riskTrigger),d.a.createElement("td",null,t.occurrence),d.a.createElement("td",null,t.amountTiming),d.a.createElement("td",null,t.financialImpact),d.a.createElement("td",null,t.nonFinancialImpact),d.a.createElement("td",null,t.relatedAccount),d.a.createElement("td",null,t.relatedStaff),d.a.createElement("td",null,j()(t.tracedDate).format("Do MM YYYY")),d.a.createElement("td",null,t.tracedBy),d.a.createElement("td",null,j()(t.rectificationDate).format("Do MM YYYY")),d.a.createElement("td",null,t.remarks))})))))}))))}}]),t}(d.a.Component)}}]);
//# sourceMappingURL=25.e2f560c6.chunk.js.map