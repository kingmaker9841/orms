(this.webpackJsonporr=this.webpackJsonporr||[]).push([[20],{544:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(546);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},546:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},547:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(e){for(var t={},a=e.target,n=0;n<a.length;n++){var r=a.elements[n],c=r.name,s=r.value,o=r.type;if(s)switch(o){case"checkbox":t[c]=r.checked;break;default:t[c]=s}}return t},r=function(e){e&&Object.keys(e).forEach((function(t){var a=e[t],n=document.getElementById(t);n&&(n.checked=a,n.value=a)}))}},549:function(e,t,a){"use strict";var n=a(6),r=a(14),c=a(2),s=a.n(c),o=a(1),l=a.n(o),i=a(18),u=a.n(i),d=a(8),f={tag:d.i,className:l.a.string,cssModule:l.a.object},h=function(e){var t=e.className,a=e.cssModule,c=e.tag,o=Object(r.a)(e,["className","cssModule","tag"]),l=Object(d.f)(u()(t,"card-header"),a);return s.a.createElement(c,Object(n.a)({},o,{className:l}))};h.propTypes=f,h.defaultProps={tag:"div"},t.a=h},552:function(e,t,a){"use strict";var n=a(6),r=a(14),c=a(2),s=a.n(c),o=a(1),l=a.n(o),i=a(18),u=a.n(i),d=a(8),f={tag:d.i,className:l.a.string,cssModule:l.a.object},h=function(e){var t=e.className,a=e.cssModule,c=e.tag,o=Object(r.a)(e,["className","cssModule","tag"]),l=Object(d.f)(u()(t,"card-footer"),a);return s.a.createElement(c,Object(n.a)({},o,{className:l}))};h.propTypes=f,h.defaultProps={tag:"div"},t.a=h},558:function(e,t,a){"use strict";var n=a(6),r=a(14),c=a(2),s=a.n(c),o=a(1),l=a.n(o),i=a(18),u=a.n(i),d=a(8),f={className:l.a.string,cssModule:l.a.object,size:l.a.string,bordered:l.a.bool,borderless:l.a.bool,striped:l.a.bool,dark:l.a.bool,hover:l.a.bool,responsive:l.a.oneOfType([l.a.bool,l.a.string]),tag:d.i,responsiveTag:d.i,innerRef:l.a.oneOfType([l.a.func,l.a.string,l.a.object])},h=function(e){var t=e.className,a=e.cssModule,c=e.size,o=e.bordered,l=e.borderless,i=e.striped,f=e.dark,h=e.hover,m=e.responsive,b=e.tag,p=e.responsiveTag,v=e.innerRef,g=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),E=Object(d.f)(u()(t,"table",!!c&&"table-"+c,!!o&&"table-bordered",!!l&&"table-borderless",!!i&&"table-striped",!!f&&"table-dark",!!h&&"table-hover"),a),O=s.a.createElement(b,Object(n.a)({},g,{ref:v,className:E}));if(m){var y=Object(d.f)(!0===m?"table-responsive":"table-responsive-"+m,a);return s.a.createElement(p,{className:y},O)}return O};h.propTypes=f,h.defaultProps={tag:"table",responsiveTag:"div"},t.a=h},560:function(e,t,a){"use strict";var n=a(6),r=a(14),c=a(2),s=a.n(c),o=a(1),l=a.n(o),i=a(18),u=a.n(i),d=a(8),f=l.a.oneOfType([l.a.number,l.a.string]),h=l.a.oneOfType([l.a.string,l.a.number,l.a.shape({size:f,order:f,offset:f})]),m={children:l.a.node,hidden:l.a.bool,check:l.a.bool,size:l.a.string,for:l.a.string,tag:d.i,className:l.a.string,cssModule:l.a.object,xs:h,sm:h,md:h,lg:h,xl:h,widths:l.a.array},b={tag:"label",widths:["xs","sm","md","lg","xl"]},p=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},v=function(e){var t=e.className,a=e.cssModule,c=e.hidden,o=e.widths,l=e.tag,i=e.check,f=e.size,h=e.for,m=Object(r.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),b=[];o.forEach((function(t,n){var r=e[t];if(delete m[t],r||""===r){var c,s=!n;if(Object(d.d)(r)){var o,l=s?"-":"-"+t+"-";c=p(s,t,r.size),b.push(Object(d.f)(u()(((o={})[c]=r.size||""===r.size,o["order"+l+r.order]=r.order||0===r.order,o["offset"+l+r.offset]=r.offset||0===r.offset,o))),a)}else c=p(s,t,r),b.push(c)}}));var v=Object(d.f)(u()(t,!!c&&"sr-only",!!i&&"form-check-label",!!f&&"col-form-label-"+f,b,!!b.length&&"col-form-label"),a);return s.a.createElement(l,Object(n.a)({htmlFor:h},m,{className:v}))};v.propTypes=m,v.defaultProps=b,t.a=v},569:function(e,t,a){"use strict";var n=a(6),r=a(14),c=a(2),s=a.n(c),o=a(1),l=a.n(o),i=a(18),u=a.n(i),d=a(8),f={children:l.a.node,row:l.a.bool,check:l.a.bool,inline:l.a.bool,disabled:l.a.bool,tag:d.i,className:l.a.string,cssModule:l.a.object},h=function(e){var t=e.className,a=e.cssModule,c=e.row,o=e.disabled,l=e.check,i=e.inline,f=e.tag,h=Object(r.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),m=Object(d.f)(u()(t,!!c&&"row",l?"form-check":"form-group",!(!l||!i)&&"form-check-inline",!(!l||!o)&&"disabled"),a);return"fieldset"===f&&(h.disabled=o),s.a.createElement(f,Object(n.a)({},h,{className:m}))};h.propTypes=f,h.defaultProps={tag:"div"},t.a=h},610:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(54),r="/branches",c="/provinces";function s(e){n.server.get("".concat(r)).then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}function o(e){n.server.get("".concat(c)).then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}function l(e,t){n.server.put("".concat(r),e).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}},891:function(e,t,a){"use strict";a.r(t);var n=a(543),r=a.n(n),c=a(544),s=a(85),o=a(86),l=a(88),i=a(87),u=a(89),d=a(2),f=a.n(d),h=a(542),m=a(532),b=a(569),p=a(560),v=a(534),g=a(535),E=a(537),O=a(549),y=a(656),j=a(909),N=a(913),S=a(881),w=a(538),k=a(558),P=a(552),M=a(610),C=a(547),x=a(578),A=a.n(x),B=a(559),T=a.n(B),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(a=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={branches:[],provinces:[],selectedProvince:null,dropdownOpen:!1,sortColumn:{path:"branch",order:"asc"},searchQuery:"",unAllocatedBranches:[]},a.toggle=function(){var e=a.state.dropdownOpen;a.setState({dropdownOpen:!e})},a.onItemSelect=function(e){a.setState({selectedProvince:e||""})},a.handleAllSelect=function(){a.setState({selectedProvince:""})},a.onSort=function(e){var t=Object(c.a)({},a.state.sortColumn);t.path===e?t.order="asc"===t.order?"desc":"asc":(t.path=e,t.order="asc"),a.setState({sortColumn:t})},a.renderSortIcon=function(e){return"asc"===a.state.sortColumn.order?f.a.createElement("i",{className:"fa fa-sort-asc"}):f.a.createElement("i",{className:"fa fa-sort-desc"})},a.handleSearchQuery=function(e){a.setState({searchQuery:e.target.value})},a.handleSelect=function(e){a.setState({selectedBranch:e.target.value})},a.addBranchToProvince=function(e){var t,n,c,s,o;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e.preventDefault(),t=Object(C.a)(e),n=Number(t.branchId),c=a.state.provinces.map((function(e){return a.state.selectedProvince===e.id&&e.province_to_branches.push({provinceId:e.id,branchId:n}),e})),s=a.state.unAllocatedBranches.filter((function(e){return Number(e.id)===Number(a.state.selectedBranch)})),l.next=7,r.a.awrap(s.map((function(e){return e.id})));case 7:s=l.sent,o=a.state.unAllocatedBranches.filter((function(e){return e.id!==s[0]})),a.setState({provinces:c,unAllocatedBranches:o});case 10:case"end":return l.stop()}}))},a.handleSubmit=function(e){e.preventDefault(),Object(M.a)(a.state.provinces,(function(e,t){e||window.alert("Success")}))},a.handleFilter=function(){var e=[],t=[];a.state.provinces.forEach((function(t){t.province_to_branches.forEach((function(t){return e.push(t.branchId)}))})),a.state.branches.forEach((function(e){return t.push(e.id)}));var n=t.filter((function(t){return!e.includes(t)})),r=a.state.branches.filter((function(e){return n.includes(e.id)}));a.setState({unAllocatedBranches:r})},a.handleRemove=function(e){var t,n,c;return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=a.state.provinces,(n=[]).push(e.id),a.state.provinces.map((function(e){return A.a.remove(e.province_to_branches,(function(e){return n.includes(e.branchId)}))})),a.setState({provinces:t}),(c=a.state.unAllocatedBranches).push(e),a.setState({unAllocatedBranches:c});case 8:case"end":return r.stop()}}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(M.b)((function(t,a){t||e.setState({branches:a})})),Object(M.c)((function(t,a){t||e.setState({provinces:a})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.branches,n=t.searchQuery,r=this.props.permissions,c=this.state.provinces.filter((function(t){return t.id===e.state.selectedProvince?1:0}))[0],s=a;n&&(s=a.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())||e.address.toLowerCase().startsWith(n.toLowerCase())})));var o=this.state.provinces.filter((function(t){return e.state.selectedProvince===t.id})).map((function(e){return e.name})),l=A.a.orderBy(this.state.provinces,["id"],["asc"]);return f.a.createElement("div",{className:"animated fadeIn"},f.a.createElement(v.a,null,f.a.createElement(g.a,{xs:"12",lg:"12"},f.a.createElement(E.a,null,f.a.createElement(O.a,null,f.a.createElement(v.a,null,f.a.createElement(g.a,{xs:"2"},f.a.createElement(y.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},f.a.createElement(j.a,{caret:!0,onClick:this.handleFilter},"Province"),f.a.createElement(N.a,null,f.a.createElement(S.a,{onClick:this.handleAllSelect},"All Province"),l.map((function(t){return f.a.createElement(S.a,{key:t.id,onClick:function(){return e.onItemSelect(t.id)},className:t.id===e.state.selectedProvince?"active":""},t.name?t.name:"")}))))),f.a.createElement(g.a,{xs:"2"},f.a.createElement(h.a,{disabled:!0,value:o||"All"})),f.a.createElement(g.a,null),f.a.createElement(g.a,{xs:4},f.a.createElement(h.a,{type:"text","aria-label":"Search",placeholder:"Search",className:"mr-0",value:this.state.searchQuery,onChange:this.handleSearchQuery})))),f.a.createElement(w.a,{className:"mt-0"},f.a.createElement(k.a,{responsive:!0,className:"mt-0",bordered:!0,striped:!0},f.a.createElement("thead",null,f.a.createElement("tr",null,f.a.createElement("th",null,"Branch Name"),f.a.createElement("th",{onClick:function(){return e.onSort("")},style:{cursor:"pointer"}},"Date registered ",this.renderSortIcon()),f.a.createElement("th",{onClick:function(){return e.onSort("address")},style:{cursor:"pointer"}},"Address ",this.renderSortIcon()),f.a.createElement("th",{style:{width:"30px"}}))),f.a.createElement("tbody",null,s.map((function(t,a){var n=!1;if(c){var s=!0,o=!1,l=void 0;try{for(var i,u=c.province_to_branches[Symbol.iterator]();!(s=(i=u.next()).done);s=!0){if(i.value.branchId===t.id){n=!0;break}}}catch(d){o=!0,l=d}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}}else n=!0;return n?f.a.createElement("tr",{key:a},f.a.createElement("td",null,t.name),f.a.createElement("td",null,T()(t.createdAt).format("MMM Do YY")),f.a.createElement("td",null,t.address),f.a.createElement("td",null,e.state.selectedProvince&&3===r.branch?f.a.createElement(m.a,{size:"sm",color:"danger",onClick:function(){return e.handleRemove(t)}},f.a.createElement("i",{className:"fa fa-minus-circle","aria-hidden":"true"})):null)):null})))),this.state.selectedProvince&&r.branch>=2?f.a.createElement("form",{className:"row",onSubmit:this.addBranchToProvince},f.a.createElement(g.a,null,f.a.createElement(b.a,null,f.a.createElement(p.a,{for:"branch"},f.a.createElement("strong",null,"Add Branches")),f.a.createElement(h.a,{type:"select",name:"branchId",required:!0,onChange:this.handleSelect},f.a.createElement("option",{value:""},"--Please select a branch--"),this.state.unAllocatedBranches.map((function(e){return f.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),f.a.createElement(g.a,{xs:3},f.a.createElement(m.a,{size:"md",type:"submit",color:"danger",className:"mt-4"}," ","+"))):null),r.branch>=2?f.a.createElement(P.a,null,f.a.createElement(m.a,{color:"success",onClick:this.handleSubmit},f.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit")):null))))}}]),t}(d.Component);t.default=I}}]);
//# sourceMappingURL=20.91e95292.chunk.js.map